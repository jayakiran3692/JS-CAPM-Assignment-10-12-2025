@host = http://localhost:4004
@service = {{host}}/odata/v4/project

### 1) Metadata
GET {{service}}/$metadata
Accept: application/xml


### 2) Create a Project with one Milestone and two Tasks (deep insert)

POST {{service}}/Projects
Content-Type: application/json
Accept: application/json

{
  "ID": "11111111-1111-1111-1111-111111111111",
  "name": "SAP S/4HANA Rollout",
  "code": "PRJ-S4-001",
  "customerName": "Global Manufacturing Ltd.",
  "startDate": "2025-01-01",
  "endDate": "2025-06-30",
  "status": "ACTIVE",
  "budget": 500000,
  "currency": "EUR",
  "Milestones": [
    {
      "ID": "22222222-2222-2222-2222-222222222222",
      "title": "Blueprint Phase",
      "plannedDate": "2025-02-15",
      "status": "IN_PROGRESS",
      "Tasks": [
        {
          "ID": "33333333-3333-3333-3333-333333333333",
          "title": "Requirements Workshops",
          "description": "Collect detailed requirements from business units.",
          "priority": "HIGH",
          "status": "IN_PROGRESS",
          "estimateHrs": 120
        },
        {
          "ID": "44444444-4444-4444-4444-444444444444",
          "title": "Process Mapping",
          "description": "Map AS-IS and TO-BE processes.",
          "priority": "MEDIUM",
          "status": "OPEN",
          "estimateHrs": 80
        }
      ]
    }
  ]
}


### 3) Read Projects with Milestones and Tasks

GET {{service}}/Projects?$expand=Milestones($expand=Tasks)
Accept: application/json


### 4) Create a TimeEntry for a Task

POST {{service}}/TimeEntries
Content-Type: application/json
Accept: application/json

{
  "ID": "55555555-5555-5555-5555-555555555555",
  "task_ID": "33333333-3333-3333-3333-333333333333",
  "workDate": "2025-01-10",
  "hours": 4.5,
  "notes": "Workshop with finance team",
  "recordedBy": "j.doe"
}


### 5) Create another TimeEntry for same Task

POST {{service}}/TimeEntries
Content-Type: application/json
Accept: application/json

{
  "ID": "66666666-6666-6666-6666-666666666666",
  "task_ID": "33333333-3333-3333-3333-333333333333",
  "workDate": "2025-01-11",
  "hours": 3.0,
  "notes": "Follow-up clarifications",
  "recordedBy": "j.doe"
}


### 6) Check Task to see updated spentHrs

GET {{service}}/Tasks(33333333-3333-3333-3333-333333333333)
Accept: application/json


### 7) Block a Task (will create an Issue via after-UPDATE)

PATCH {{service}}/Tasks(44444444-4444-4444-4444-444444444444)
Content-Type: application/json
Accept: application/json

{
  "status": "BLOCKED"
}


### 8) Read Issues

GET {{service}}/Issues
Accept: application/json


### 9) Try to delete Project WITHOUT force flag (should fail if milestones exist)

DELETE {{service}}/Projects(11111111-1111-1111-1111-111111111111)
Accept: application/json


### 10) Force delete Project (will write a high-severity Issue)

DELETE {{service}}/Projects(11111111-1111-1111-1111-111111111111)
Content-Type: application/json
Accept: application/json

{
  "force": true
}